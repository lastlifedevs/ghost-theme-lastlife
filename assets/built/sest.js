const GRADIENT_PREFIX="grad-",FIELD_GROUP_PREFIX="fieldGroup:";function updateRange(t){var e=$(t),s=e.data("prop"),l="";switch(s){case"color":l="rgb("+e.val()+","+e.val()+","+e.val()+")",e.data("val",e.val())}$(e.data("sel")).css(s,l)}function updateJsColor(t){var e=$(t.valueElement),s=e.data("prop"),l="";let a="",r="";switch(s){case"color":case"background":l=t.toHEXString(),e.data("val",l),a="box-shadow";let o=rgbToHsl(t.rgb[0],t.rgb[1],t.rgb[2]);o[0]=Math.round(o[0]).toString(),o[1]=Math.round(100*o[1]).toString()+"%";let n=Math.round(100*o[2]),i=n+n/2;i>100&&(i=n/2),o[2]=i.toString()+"%",r="hsl("+o[0]+","+o[1]+","+o[2]+")";break;case"grad-background":s=s.substring(GRADIENT_PREFIX.length);let g=e.data("fg");if(void 0===g)return;let f=$(".sest-field-group [data-fg="+g+"]");l="linear-gradient(#";for(let t=0;t<f.length;t++){let e=f[t].value;l+=e,$(f[t]).data("val",e),t!==f.length-1&&(l+=", #")}l+=")"}if(a){let t=$(e.data("sel"));switch(a){case"box-shadow":for(let e=0;e<t.length;e++){let o=t[e];$(o).css(s,l);let n=$(o).css(a);n&&$(o).css(a,r+n.substring(n.indexOf(")")+1))}}}else $(e.data("sel")).css(s,l)}function rgbToHsl(t,e,s){t/=255,e/=255,s/=255;let l,a=Math.max(t,e,s),r=Math.min(t,e,s),o=a-r;0===o?l=0:a===t?l=(e-s)/o%6:a===e?l=(s-t)/o+2:a===s&&(l=(t-e)/o+4);let n=(r+a)/2;return[60*l,0===o?0:o/(1-Math.abs(2*n-1)),n]}function outputSeStPrefs(){var t="",e=$("#sest-form input.sest-field");for(let l=0;l<e.length;l++){var s=$(e[l]);t+=s.data("sel")+"/"+s.data("prop")+"/"+s.data("val"),l!==e.length-1&&(t+="\\")}var l=$("#sest-form .sest-field-group");""!==t&&l.length>0&&(t+="\\");for(let e=0;e<l.length;e++){t+=FIELD_GROUP_PREFIX;let s=$(l[e]).find("input");t+=$(s[0]).data("sel")+"/"+$(s[0]).data("prop")+"/";for(let e=0;e<s.length;e++)t+="#"+$(s[e]).data("val"),e!==s.length-1&&(t+=",");e!==l.length-1&&(t+="\\")}return t}function refreshSeStPrefs(){let t=$("#sest-form"),e=t.find("input[type=range]");for(let t=0;t<e.length;t++)updateRange($(e[t]));let s=t.find("input.jscolor");for(let t=0;t<s.length;t++)s[t].jscolor.fromString(s[t].value),updateJsColor(s[t].jscolor)}function applySeStPrefs(t){var e=t.split("\\");for(let t=0;t<e.length;t++){let s=e[t].split("/");if(s[0].startsWith(FIELD_GROUP_PREFIX)){s[0]=s[0].substring(FIELD_GROUP_PREFIX.length,s[0].length);let t=$("input[data-sel='"+s[0]+"'][data-prop='"+s[1]+"']");switch(s[1]){case"grad-background":s[1]=s[1].substring(GRADIENT_PREFIX.length),$(s[0]).css(s[1],"linear-gradient("+s[2]+")");let e=s[2].split(",");for(let s=0;s<e.length;s++){let l=e[s].substring(1);t[s].jscolor.fromString(l)}}}else{let t=$("input[data-sel='"+s[0]+"'][data-prop='"+s[1]+"']");"range"===t.attr("type")?(t.val(s[2]),updateRange(t)):t.hasClass("jscolor")&&(t[0].jscolor.fromString(s[2]),updateJsColor(t[0].jscolor))}}}$(function(){var t=localStorage.getItem("sest-prefs");null!==t&&applySeStPrefs(t),$("#sest-toggle").css("display","block"),$("#sest-toggle").click(function(){$("#selfstyle").slideDown()}),$("#sest-close-btn").click(function(){$("#selfstyle").slideUp()}),$(".sest-form-row input[type=range]").on("change mousemove",function(){updateRange($(this))}),$("#sest-form").submit(function(t){localStorage.setItem("sest-prefs",outputSeStPrefs()),t.preventDefault()}),$("#sest-form button[type='reset']").click(function(t){t.preventDefault(),$("#sest-form")[0].reset(),refreshSeStPrefs()})});
//# sourceMappingURL=sest.js.map
